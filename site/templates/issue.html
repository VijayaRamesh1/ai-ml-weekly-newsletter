{% extends "base.html" %}
{% block content %}
  <section class="list" aria-live="polite">
    {% for item in items %}
      <article class="card"
        data-rank="{{ item.rank }}"
        data-score="{{ "%.3f"|format(item.final_score) }}"
        data-source="{{ item.source }}"
        data-date="{{ item.published }}"
        data-haystack="{{ (item.title ~ ' ' ~ item.summary_p1 ~ ' ' ~ item.summary_p2)|lower|replace('"','')|replace("'",'') }}">

        <div class="topline">
          <span class="rank">#{{ item.rank }}</span>
          <h2 class="title"><a href="{{ item.url }}">{{ item.title }}</a></h2>
        </div>

        <div class="sub">
          <span>{{ item.source }}</span> â€¢
          <span>{{ item.published }}</span>
          <span class="chip" title="Composite score">Score {{ "%.2f"|format(item.final_score) }}</span>
        </div>

        <div class="sum">
          <span class="eyebrow">What's new</span>
          <p>{{ item.summary_p1 }}</p>
          <span class="eyebrow">Why it matters</span>
          <p>{{ item.summary_p2 }}</p>
          <div class="expand"><button type="button" data-expand>Expand</button></div>
        </div>

        <div class="scores" aria-label="Axis scores">
          <div class="bar">
            <span>Tech</span>
            <div class="track"><div class="fill" style="width: {{ (item.tech*100)|round(0,'floor') }}%"></div></div>
            <span>{{ "%.2f"|format(item.tech) }}</span>
          </div>
          <div class="bar">
            <span>Applicability</span>
            <div class="track"><div class="fill" style="width: {{ (item.app*100)|round(0,'floor') }}%"></div></div>
            <span>{{ "%.2f"|format(item.app) }}</span>
          </div>
          <div class="bar">
            <span>Business</span>
            <div class="track"><div class="fill" style="width: {{ (item.biz*100)|round(0,'floor') }}%"></div></div>
            <span>{{ "%.2f"|format(item.biz) }}</span>
          </div>
        </div>

      </article>
    {% endfor %}
  </section>
{% endblock %}
